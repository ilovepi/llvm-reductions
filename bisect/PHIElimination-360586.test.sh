#!/bin/bash
export LLVM_DISABLE_SYMBOLIZATION=1
if /usr/local/google/home/paulkirth/llvm-fork/build/bin/clang -cc1 -triple aarch64-unknown-linux-gnu -emit-obj -disable-free -clear-ast-before-backend -main-file-name PHIElimination.cpp -mrelocation-model pic -pic-level 2 -mframe-pointer=non-leaf -fmath-errno -ffp-contract=on -fno-rounding-math -mconstructor-aliases -target-cpu generic -target-feature +v8a -target-feature +fp-armv8 -target-feature +neon -target-abi aapcs -fdebug-compilation-dir=/b/s/w/ir/x/w/llvm_build/tools/clang/stage2-bins -fdebug-prefix-map=/b/s/w/ir/x/w/llvm_build/tools/clang/stage2-bins=../../../../llvm-llvm-project -fdebug-prefix-map=/b/s/w/ir/x/w/llvm-llvm-project/= -ffunction-sections -fdata-sections -fcoverage-compilation-dir=/b/s/w/ir/x/w/llvm_build/tools/clang/stage2-bins -sys-header-deps -D GTEST_HAS_RTTI=0 -D _DEBUG -D _GLIBCXX_ASSERTIONS -D _GNU_SOURCE -D __STDC_CONSTANT_MACROS -D __STDC_FORMAT_MACROS -D __STDC_LIMIT_MACROS -D NDEBUG -U NDEBUG -fmacro-prefix-map=/b/s/w/ir/x/w/llvm_build/tools/clang/stage2-bins=../../../../llvm-llvm-project -fmacro-prefix-map=/b/s/w/ir/x/w/llvm-llvm-project/= -fcoverage-prefix-map=/b/s/w/ir/x/w/llvm_build/tools/clang/stage2-bins=../../../../llvm-llvm-project -fcoverage-prefix-map=/b/s/w/ir/x/w/llvm-llvm-project/= -O3 -pedantic -std=c++17 -fdeprecated-macro -ferror-limit 19 -fvisibility=default -fvisibility-inlines-hidden -fno-rtti -fno-signed-char -fgnuc-version=4.2.1 -fskip-odr-check-in-gmf -fcolor-diagnostics -vectorize-loops -vectorize-slp -target-feature +outline-atomics -faddrsig -x c++ -emit-llvm -Werror=implicit-int PHIElimination-360586.reduced.cpp >& t.log ; then
  exit 1
fi
grep -F 'Assertion `i < NumUserOperands && "getOperand() out of range!"'"'"' failed' t.log || exit 1
